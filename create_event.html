<!DOCTYPE html>
<html lang="en" class="h-100">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, shrink-to-fit=9">
<meta name="description" content="Gambolthemes">
<meta name="author" content="Gambolthemes">
<title>Barren - Simple Online Event Ticketing System</title>

<link rel="icon" type="image/png" href="images/fav.png">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
<link href='vendor/unicons-2.0.1/css/unicons.css' rel='stylesheet'>
<link href="css/style.css" rel="stylesheet">
<link href="css/responsive.css" rel="stylesheet">
<link href="css/night-mode.css" rel="stylesheet">
<link href="css/alert.css" rel="stylesheet">

<link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet">
<link href="vendor/OwlCarousel/assets/owl.carousel.css" rel="stylesheet">
<link href="vendor/OwlCarousel/assets/owl.theme.default.min.css" rel="stylesheet">
<link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
<link href="vendor/bootstrap-select/dist/css/bootstrap-select.min.css" rel="stylesheet">
</head>
<body class="d-flex flex-column h-100">

    <div class="alertdiv" id="alertdiv" ></div><!--alert div is here -->
<header class="header">
<div class="header-inner">
    <nav class="navbar navbar-expand-lg bg-barren barren-head navbar fixed-top justify-content-sm-start pt-0 pb-0">
        <div class="container">
        <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar">
        <span class="navbar-toggler-icon">
        <i class="fa-solid fa-bars"></i>
        </span>
        </button>
        <a class="navbar-brand order-1 order-lg-0 ml-lg-0 ml-2 me-auto" href="index.html">
        <div class="res-main-logo">
        <img src="images/logo-icon.svg" alt="">
        </div>
        <div class="main-logo" id="logo">
        <img src="images/logo.svg" alt="">
        <img class="logo-inverse" src="images/dark-logo.svg" alt="">
        </div>
        </a>
        <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasNavbar" aria-labelledby="offcanvasNavbarLabel">
        <div class="offcanvas-header">
        <div class="offcanvas-logo" id="offcanvasNavbarLabel">
        <img src="images/logo-icon.svg" alt="">
        </div>
        <button type="button" class="close-btn" data-bs-dismiss="offcanvas" aria-label="Close">
        <i class="fa-solid fa-xmark"></i>
        </button>
        </div>
        <div class="offcanvas-body">
        <div class="offcanvas-top-area">
        <div class="create-bg">
        <a href="create_event.html" class="offcanvas-create-btn">
        <i class="fa-solid fa-calendar-days"></i>
        <span>Create Event</span>
        </a>
        </div>
        </div>
        <ul class="navbar-nav justify-content-center flex-grow-1 pe_5">
        <li class="nav-item">
        <a class="nav-link active" aria-current="page" href="index.html">Home</a>
        </li>
        
        <li class="nav-item">
        <a class="nav-link" href="create_ticket.html">create Ticket</a>
        </li>
        
        <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="index.html#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        Help
        </a>
        <ul class="dropdown-menu dropdown-submenu">
        <li><a class="dropdown-item" href="faq.html">FAQ</a></li>
        <li><a class="dropdown-item" href="help_center.html">Help Center</a></li>
        <li><a class="dropdown-item" href="contact_us.html">Contact Us</a></li>
        </ul>
        </li>
        
        
        </ul>
        </div>
        <div class="offcanvas-footer">
        <div class="offcanvas-social">
        <h5>Follow Us</h5>
        <ul class="social-links">
        <li><a href="index.html#" class="social-link"><i class="fab fa-facebook-square"></i></a>
        <li><a href="index.html#" class="social-link"><i class="fab fa-instagram"></i></a>
        <li><a href="index.html#" class="social-link"><i class="fab fa-twitter"></i></a>
        <li><a href="index.html#" class="social-link"><i class="fab fa-linkedin-in"></i></a>
        <li><a href="index.html#" class="social-link"><i class="fab fa-youtube"></i></a>
        </ul>
        </div>
        </div>
        </div>
        <div class="right-header order-2">
        <ul class="align-self-stretch">
        <!--CREATE EVENT BUTTO SECTION STARTS HERE-->
        <li>
            <a href="create_event.html">
                <button type="button" class="create-btn btn-hover">
                <i class="fa-solid fa-calendar-days"></i>
                <span>Create Event</span>
                </button>
            </a>
        </li>
        <!--=====-->
        <li class="dropdown account-dropdown">
        <a href="index.html#" class="account-link" role="button" id="accountClick" data-bs-auto-close="outside" data-bs-toggle="dropdown" aria-expanded="false">
        <img src="images/profile-imgs/img-13.jpg" alt="">
        <i class="fas fa-caret-down arrow-icon"></i>
        </a>
        <ul class="dropdown-menu dropdown-menu-account dropdown-menu-end" aria-labelledby="accountClick">
        <li>
        <div class="dropdown-account-header">
        <div class="account-holder-avatar">
        <img src="images/profile-imgs/img-13.jpg" alt="">
        </div>
        <h5 id="loggedin_name"></h5>
        <p><a href="" class="__cf_email__" id="loggedin_email"></a></p>
        </div>
        </li>
        <li class="profile-link">
        <a href="my_organisation_dashboard.html" class="link-item">My Organisation</a>
        <a href="organiser_profile_view.html" class="link-item">My Profile</a>
        <a href="signout.html" class="link-item">Sign Out</a>
        </li>
        </ul>
        </li>
        <li>
        <div class="night_mode_switch__btn">
        <div id="night-mode" class="fas fa-moon fa-sun"></div>
        </div>
        </li>
        </ul>
        </div>
        </div>
        </nav>

<div class="overlay"></div>
</div>
</header>


<div class="wrapper">
<div class="breadcrumb-block">
<div class="container">
<div class="row">
<div class="col-lg-12 col-md-10">
<div class="barren-breadcrumb">
<nav aria-label="breadcrumb">
<ol class="breadcrumb">
<li class="breadcrumb-item"><a href="index.html">Home</a></li>
<!-- <li class="breadcrumb-item"><a href="explore_events.html">Explore Events</a></li>
<li class="breadcrumb-item"><a href="online_event_detail_view.html">Online Event Detail View</a></li> -->
<li class="breadcrumb-item active" aria-current="page">Create Event</li>
</ol>
</nav>
</div>
</div>
</div>
</div>
</div>
<div class="event-dt-block p-80">
<div class="container">
<div class="row">
<div class="col-lg-12 col-md-12">
<div class="main-title checkout-title">
<h3>Create Event</h3>
</div>
</div>
<!--===== BLOCK STARTS HERE =======-->
<div class="col-xl-8 col-lg-12 col-md-12 mx-auto">
<div class="checkout-block">
<div class="main-card">

<!-- preloader -->
<div id="preloader">
    <div id="status-loader">&nbsp;</div>
</div>
<!-- preloader -->
<div class="bp-title">
<h4>Event Creation</h4>
</div>
<div class="bp-content bp-form">
<div class="row">
<div class="col-lg-6 col-md-12">
<div class="form-group mt-4">
<form id="inputform2">
<label class="form-label">Event Name<span class="text-danger">*</span></label>
<input class="form-control h_50" type="text" name="event_name" placeholder="" required>
</div>
</div>
<div class="col-lg-6 col-md-12">
<div class="form-group mt-4">
<label class="form-label">Location (Address) <span class="text-danger">*</span></label>
<input class="form-control h_50" type="text" name="location" placeholder="" required>
</div>
</div>
<div class="col-lg-6 col-md-12">
    <div class="form-group mt-4">
    <label class="form-label">Event date <span class="text-danger">*</span></label>
    <input class="form-control h_50" type="date" name="event_date" placeholder="" required>
    </div>
    </div>
    <div class="col-lg-6 col-md-12">
        <div class="form-group mt-4">
        <label class="form-label">Type<span class="text-danger">*</span></label>
        <select class="form-select form-select-lg" name="type" id="numberToSelect" required>
            <option selected>--- Select Event Type ---</option>
            <option value="paid">Paid</option>
            <option value="free">Free</option>
        </select>
        </div>
        </div>
        <div class="col-lg-6 col-md-12">
            <div class="form-group mt-4">
            <label class="form-label">Start Time <span class="text-danger">*</span></label>
            <input class="form-control h_50" type="time" name="start_time" placeholder="" required>
            </div>
            </div>
            <div class="col-lg-6 col-md-12">
                <div class="form-group mt-4">
                <label class="form-label">Maximum Seats <span class="text-danger">*</span></label>
                <input class="form-control h_50" type="number" name="maximun_seats" placeholder="" required>
                </div>
                </div>
        <div class="col-lg-12 col-md-12">
            <div class="form-group mt-4">
                <label class="form-label">Media <span class="text-danger">*</span></label>
                <input type="file" class="form-control" id="fileinput" name="file" accept="jpg">
            </div>
        </div>


<div class="col-lg-12 col-md-12">
<div class="form-group mt-4">
<button class="form-control btn btn-success" type="submit" style="background-color:#6ac045 !important;color:#fff !important;">Submit</button>
</form>
</div>
</div>
</div>
</div>
</div>
<!-- ends here -->
</div>
</div>
<!--======= BLOCK TWO STARTS HERE ======-->

<!-- Ends here -->
</div>
</div>
</div>
</div>


<footer class="footer mt-auto">
<div class="footer-top">
<div class="container">
<div class="row">
<div class="col-lg-3 col-md-6">
<div class="footer-content">
<h4>Company</h4>
<ul class="footer-link-list">
<li><a href="about_us.html" class="footer-link">About Us</a></li>
<li><a href="help_center.html" class="footer-link">Help Center</a></li>
<li><a href="faq.html" class="footer-link">FAQ</a></li>
<li><a href="contact_us.html" class="footer-link">Contact Us</a></li>
</ul>
</div>
</div>
<div class="col-lg-3 col-md-6">
<div class="footer-content">
<h4>Useful Links</h4>
<ul class="footer-link-list">
<li><a href="create.html" class="footer-link">Create Event</a></li>
<li><a href="sell_tickets_online.html" class="footer-link">Sell Tickets Online</a></li>
<li><a href="privacy_policy.html" class="footer-link">Privacy Policy</a></li>
<li><a href="term_and_conditions.html" class="footer-link">Terms & Conditions</a></li>
</ul>
</div>
</div>
<div class="col-lg-3 col-md-6">
<div class="footer-content">
<h4>Resources</h4>
<ul class="footer-link-list">
<li><a href="pricing.html" class="footer-link">Pricing</a></li>
<li><a href="our_blog.html" class="footer-link">Blog</a></li>
<li><a href="refer_a_friend.html" class="footer-link">Refer a Friend</a></li>
</ul>
</div>
</div>
<div class="col-lg-3 col-md-6">
<div class="footer-content">
<h4>Follow Us</h4>
<ul class="social-links">
<li><a href="checkout.html#" class="social-link"><i class="fab fa-facebook-square"></i></a>
<li><a href="checkout.html#" class="social-link"><i class="fab fa-instagram"></i></a>
<li><a href="checkout.html#" class="social-link"><i class="fab fa-twitter"></i></a>
<li><a href="checkout.html#" class="social-link"><i class="fab fa-linkedin-in"></i></a>
<li><a href="checkout.html#" class="social-link"><i class="fab fa-youtube"></i></a>
</ul>
</div>
<div class="footer-content">
<h4>Download Mobile App</h4>
<div class="download-app-link">
<a href="checkout.html#" class="download-btn"><img src="images/app-store.png" alt=""></a>
<a href="checkout.html#" class="download-btn"><img src="images/google-play.png" alt=""></a>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="footer-bottom">
<div class="container">
<div class="row">
<div class="col-12">
<div class="footer-copyright-text">
<p class="mb-0">© 2022, <strong>Barren</strong>. All rights reserved. Powered by Gambolthemes</p>
</div>
</div>
</div>
</div>
</div>
</footer>
<script src="js/jquery-3.6.0.min.js"></script>
<script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="vendor/OwlCarousel/owl.carousel.js"></script>
<script src="js/localstorage.js"></script>
<script src="js/xml_http_request.js"></script>
<script src="vendor/bootstrap-select/dist/js/bootstrap-select.min.js"></script>
<script src="js/url.js"></script>
<script src="js/custom.js"></script>
<script src="js/night-mode.js"></script>
<script>

if (!url_val|| url_val.length < 20) window.location.replace('sign_in.html')

data = getWithExpiry(url_val) 

if(data == null || typeof data !== 'object' )window.location.replace('sign_in.html')// treet thisas special

userToken = data.token
document.getElementById('loggedin_name').innerHTML = data.user.first_name + " " +data.user.last_name
document.getElementById('loggedin_email').innerHTML = data.user.email
const uid = data.user.uid

var form = document.getElementById('inputform2')
    form.addEventListener('submit',function(event){
        event.preventDefault()
        var formData = new FormData();
        $('#status-loader').fadeIn();  
        $('#preloader').delay(150).fadeIn('slow');

        const fields_type = ['text', 'number', 'date', 'time', 'email'];
        var inputs = document.getElementsByTagName("input");
        for (var i = 0; i < inputs.length; i++) {

            if (fields_type.includes(inputs[i].getAttribute('type'))) {
                formData.append(inputs[i].getAttribute('name'), inputs[i].value);            
            }

            if (inputs[i].getAttribute('type') == 'file') {
                var fileInput = document.getElementById('fileinput');

                if(fileInput.files[0]){
                    var size = parseFloat(fileInput.files[0].size / (1024*1024)).toFixed(2);

                    if(size > 2.50){
                        document.getElementById('alertdiv').innerHTML = '<div id="alertss" class="alertss alert__danger"><p class="alert__text" style="color:white;">'+size+'</p><button class="close-button"  onclick="closePop(this);" data-close-button="data-close-button"><div class="close-button__icon"></div></button> </div>';
                       return false; 
                    }

                    formData.append(inputs[i].getAttribute('name'), fileInput.files[0], fileInput.files[0].name);  
                }          
            }
        }

        strUser = document.getElementById("numberToSelect").value;
        formData.append("type", strUser);
        formData.append("user_id", uid);
        formData.append("status", "active");

        // console.log(...formData)

        var client = new HttpClient();
		client.get('https://laravel-csrf-scrapper.herokuapp.com/csrf_scraper.php?url=' + encodedUrl,null,null, function(response) {
		if(response.message !== 'success')alert('error here'); 
            var clientpost = new HttpClientPostUpload();
            clientpost.get(public_url+'/event/create',formData, response.token,userToken, (response) =>{
                if(response.errors){
                    d = response.errors
                    Object.keys(d).forEach(key => {// console.log(key, d[key]);
                        if(key == 'password'){
                            document.querySelector('input[name|='+key+']').value='';
                            document.querySelector('input[name|=password_confirmation]').value='';
                        }

                        $(document).find('[name='+key+']').after('<span class="text-strong text-danger">' +d[key]+ '</span>')

                    });
                }

                if(response.status == 'Error'){
                    document.getElementById('alertdiv').innerHTML = '<div id="alertss" class="alertss alert__danger"><p class="alert__text" style="color:white;">'+response.message+'</p><button class="close-button"  onclick="closePop(this);" data-close-button="data-close-button"><div class="close-button__icon"></div></button> </div>';
                }

                if(response.status == 'Success'){

					document.getElementById('alertdiv').innerHTML = '<div id="alertss" class="alertss alert__success"><p class="alert__text"  style="color:white;">'+response.message+'</p><button class="close-button" onclick="closePop(this);" data-close-button="data-close-button"><div class="close-button__icon"></div></button> </div>';

                    response.message//display this message
                    var data = response.data
                    console.log(data.event)
                    // delete data.user_details.id
                    // data.user_details.uid
                    setWithExpiry(data.event.event_uid, data.event, 15)
                    URL_add_parameter(base_url()+'/create_ticket.html',data.event.event_uid)
                    form.reset()
                }

                $('#status-loader').fadeOut('slow');
                $('#preloader').fadeOut('slow');
            
    
            });
		});
    })


</script>

<script src="js/links.js" ></script>
<script src="js/alert.js" ></script>
</body>
</html>